<!DOCTYPE html>
<html lang="en">
<head>
    <script src="util.js"></script>
    <script src="model.js"></script>
    <script src="app.js"></script>
    <!--<script type='text/JavaScript' src='http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js'></script>-->
    <script type='text/JavaScript' src='jquery-latest.js'></script>
    <script src="bootstrap.min.js"></script>
    <script src="components.js"></script>
    <link rel="stylesheet" href="bootstrap.css">
    <link rel="stylesheet" href="style.css">

    <!--<script type='text/JavaScript' src='http://code.jquery.com/jquery-latest.js'></script>-->
    <!--<link rel="stylesheet" href="http://bootswatch.com/yeti/bootstrap.css">-->

</head>
<body>

<div class="container-fluid" style="padding: 20px">
    <div class="row">
        <div class="col-md-1">
            <input class="form-control" type="text" id="searchInput"/>

            <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-primary active" id="viewAll">
                    <input type="radio" name="options" autocomplete="off" checked>All
                </label>
                <label class="btn btn-primary" id="viewFilms">
                    <input type="radio" name="options" autocomplete="off">Films
                </label>
                <label class="btn btn-primary" id="viewSeries">
                    <input type="radio" name="options" autocomplete="off">Series
                </label>
            </div>
        </div>
        <div class="col-md-11">
            <ul id="tabs-wrapper" class="nav nav-tabs"></ul>
            <div id="tabs-content-wrapper" class="tab-content"></div>
        </div>
    </div>
</div>
</body>
<script>

    var ui = {

        selectedTabId: null,

        tabsWrapper: $('#tabs-wrapper'),

        tabsContentWrapper: $('#tabs-content-wrapper'),

        searchInput: $('#searchInput'),

        getTabById: function (tabId) {
            return $('#tab_' + tabId);
        }

    };

    $(document).ready(function () {

        app.callGetMediaTabs().forEach(function (tab) {
            ui.tabsWrapper.append(components.getTab(tab));
            ui.tabsContentWrapper.append(components.getTabContent(tab));
        });


        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            var tabId = e.target.attributes['tab-id'].value;
            ui.selectedTabId = tabId;

            app.onTabUpdate(tabId);

            ui.searchInput.focus();
        });

        $('#tabs-wrapper a:first').tab('show');

        ui.searchInput.focus();
        ui.searchInput.keyup(function (e) {
            app.onFilterUpdate(e.target.value);
        });

        $('#viewAll').click(function (e) {
            console.log('qweqwe');
            app.onViewTypeUpdate('ALL');
        });
        $('#viewSeries').click(function (e) {
            app.onViewTypeUpdate('SERIES');
        });
        $('#viewFilms').click(function () {
            app.onViewTypeUpdate('FILMS');
        })

    });
</script>
</html>
